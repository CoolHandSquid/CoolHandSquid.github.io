<!doctype html><html>
    <head>
      <meta http-equiv="content-type" content="text/html; charset=utf-8">
      <title>10.10.10.171 OpenAdmin</title>
      <meta name="generator" content="CherryTree">
      <link rel="stylesheet" href="res/styles3.css" type="text/css" />
    </head>
    <body><div class='page'><h1 class='title'>10.10.10.171 OpenAdmin</h1><br/>nmap showed that 22 and 80 were open.<br />dirsearch showed me that there were directories at /music/ /artwork/  and  /sierra/<br />in looking around and clicking in music, I found that clicking “login” took me to /ona/<br />the front page of /ona/ showed me that the version number was 18.1.1<br />searchsploit showed me that it was vulnerable!<br />4791.sh<br />I was not able to make it work with the script as it was, but setting the variable &quot;URL&quot; to <a href="http://10.10.10.171/ona/loginphp">http://10.10.10.171/ona/loginphp</a> then running manually worked just fine<br />yeeyee... we are www-data<br /><br />the README.md shows a link to the github inatall page and I can see the default db username is ona_sys<br />grep -ir -C 5 ona_sys           shows that the db password is n1nj4W4rri0R!<br />lets see if it is reused with ssh<br />n1nj4W4rri0R! works for jimmy!!<br /><br />after poking around we see that there is a file named /var/www/internal/main.php that wants to dump joanna&#39;s private key<br />we see that it needs to be run with jimmy&#39;s creds.<br />netstat -natup shows us that 52846 is listening<br />curl -u jimmy:n1nj4W4rri0R! 127.0.0.1:52846/main.php<br />dumped her private key to the screen!!<br /><br />nano the key into a text file (rsa_key.txt)<br />ssh2john to make the text john readable (rsa_key.john)<br />john told me the priv key password was bloodninjas<br /><br />chmod 400 rsa_key.txt (you need to restrict the privs to use it)<br />ssh -i rsa_key.txt joanna@10.10.10.171<br />password=bloodninjas<br />we are in!!!<br /><br />sudo -l tells us we can run        /bin/nano /opt/priv       with no password<br />                                                  ^^^^^^^^^^^^ is one command by the way<br />sudo /bin/nano /opt/priv<br />gtfobins<br />root</div></body></html>